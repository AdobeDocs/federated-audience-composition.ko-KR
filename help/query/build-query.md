---
audience: end-user
title: 쿼리 모델러를 사용하여 첫 번째 쿼리 작성
description: 쿼리 모델러에서 첫 번째 쿼리를 작성하는 방법에 대해 알아봅니다
source-git-commit: 5fe470ce83a5c3d3df7717bc1203849d99edf430
workflow-type: tm+mt
source-wordcount: '2066'
ht-degree: 10%

---

# 첫 번째 쿼리 작성 {#build-query}

쿼리 작성을 시작하려면 수행할 작업에 따라 선택한 위치에서 쿼리 모델러에 액세스합니다. 쿼리 모델러가 빈 캔버스로 열립니다. 다음을 클릭합니다. **+** 쿼리의 첫 번째 노드를 구성하는 단추입니다.

다음 두 가지 유형의 요소를 추가할 수 있습니다.

* **구성 요소 필터링** (사용자 지정 조건, 대상 선택) 을 사용하면 자체 규칙을 작성하거나 쿼리를 세분화할 대상을 선택할 수 있습니다. 쿼리의 시작과 점선 전환에 추가됩니다. [필터링 구성 요소로 작업하는 방법 알아보기](#filtering)

  예: *&#39;Sports&#39; 뉴스레터를 구독한 수신자*. *뉴욕에 사는 수신자*, *샌프란시스코에 사는 수신자*

  ![](assets/query-add-component.png){zoomable="yes"}

* **그룹 연산자** (AND, OR, EXCEPT)를 사용하면 다이어그램에서 필터링 구성 요소를 함께 그룹화할 수 있습니다. 필터링 구성 요소 전의 기존 전환에 추가됩니다. [운영자를 사용한 작업 방법 알아보기](#filtering)

  예: *&quot;스포츠&quot; 뉴스레터를 구독한 수신자&#x200B;**및**뉴욕에 사는 사람&#x200B;**또는**샌프란시스코*.

  ![](assets/query-add-operator.png){zoomable="yes"}

## 필터링 구성 요소 추가 {#filtering}

구성 요소 필터링을 사용하면 다음을 사용하여 쿼리를 세분화할 수 있습니다.

* **[사용자 지정 조건](#custom-condition)**: 데이터베이스 및 고급 표현식의 속성을 사용하여 자체 조건을 빌드하여 쿼리를 필터링합니다.
* **[대상](#audiences)**: 기존 대상자를 사용하여 쿼리를 필터링합니다.

### 사용자 정의 조건 구성 {#custom-condition}

>[!CONTEXTUALHELP]
>id="dc_orchestration_querymodeler_customcondition"
>title="사용자 정의 조건"
>abstract="사용자 정의 조건은 데이터베이스 및 고급 표현식의 속성으로 고유한 조건을 빌드하여 쿼리를 필터링할 수 있는 필터링 구성 요소입니다."

사용자 지정 조건을 사용하여 쿼리를 필터링하려면 다음 단계를 따르십시오.

1. 다음을 클릭합니다. **+** 원하는 노드의 버튼을 클릭하고 **[!UICONTROL 사용자 지정 조건]**. 오른쪽에 사용자 지정 조건 속성 창이 열립니다.

1. 다음에서 **속성** 필드에서 조건을 만드는 데 활용할 데이터베이스에서 속성을 선택합니다. 속성 목록에는 연결된 테이블의 속성을 포함하여 데이터베이스의 모든 속성이 포함됩니다.

   ![](assets/query-custom-condition-fields.png){zoomable="yes"}

   >[!NOTE]
   >
   >다음 **표현식 편집** 단추를 사용하면 표현식 편집기를 활용하여 데이터베이스 및 도우미 함수의 필드를 사용하여 표현식을 수동으로 정의할 수 있습니다. [표현식 편집 방법 알아보기](expression-editor.md)

1. 드롭다운 목록에서 적용할 연산자를 선택합니다. 다양한 연산자를 사용할 수 있습니다. 드롭다운 목록에서 사용할 수 있는 연산자는 속성의 데이터 유형에 따라 다릅니다.

   +++사용 가능한 연산자 목록

   | 연산자 | 용도 | 예 |
   |  ---  |  ---  |  ---  |
   | 다음과 같음 | 두 번째 값 열에 입력한 데이터와 동일한 결과를 반환합니다. | 성(@lastName)이 &#39;Jones&#39;와 같으면 성이 Jones인 수신자만 반환됩니다. |
   | 다음과 같지 않음 | 입력한 값과 동일하지 않은 모든 값을 반환합니다. | 언어(@language)가 &#39;English&#39;와 같음 |
   | 보다 큼 | 입력한 값보다 큰 값을 반환합니다. | 50세보다 큰 연령(@age)</strong>는 &#39;50&#39;보다 큰 모든 값, 즉 &#39;51&#39;, &#39;52&#39; 등을 반환합니다. |
   | 보다 작음 | 입력한 값보다 작은 값을 반환합니다. | &#39;DaysAgo(100)&#39; 이전 생성일(@created)</strong>는 100일 이전에 만든 모든 수신자를 반환합니다. |
   | 보다 크거나 같음 | 입력한 값보다 크거나 같은 모든 값을 반환합니다. | 나이(@age)가 &#39;30&#39;보다 크거나 같음</strong>는 30세 이상의 모든 수신자를 반환합니다. |
   | 보다 작거나 같음 | 입력한 값과 같거나 낮은 값을 모두 반환합니다. | 나이(@age) &#39;60&#39; 이하</strong>는 60세 이하의 모든 수신자를 반환합니다. |
   | 포함 위치 | 표시된 값에 포함된 결과를 반환합니다. 이러한 값은 쉼표로 구분해야 합니다. | 생년월일(@birthDate)은 &#39;12/10/1979,12/10/1984&#39;에 포함되어 있으며 이 날짜 사이에 태어난 수급자를 반환합니다. |
   | 안에 없음 | 연산자에 포함 과 같은 작업을 합니다. 여기서는 입력한 값을 기준으로 수신자를 제외합니다. | 생년월일(@birthDate)은 &#39;1979/10/1984/12/10&#39;에 포함되지 않습니다. 앞의 예와는 달리 이 날짜 내에 태어난 수신자는 반환되지 않습니다. |
   | 비어 있음 | 이 경우 찾고 있는 결과는 두 번째 값 열의 빈 값과 일치합니다. | Mobile (@mobilePhone) is empty 는 모바일 번호가 없는 모든 수신자를 반환합니다. |
   | 비어 있지 않음 | Is empty 연산자와 반대로 작동합니다. 두 번째 값 열에는 데이터를 입력할 필요가 없습니다. | 이메일(@email)이 비어 있지 않습니다. |
   | 다음으로 시작 | 입력한 값으로 시작하는 결과를 반환합니다. | 계정 번호(@account)는 &#39;32010&#39;로 시작합니다. |
   | 다음으로 시작하지 않음 | 입력한 값으로 시작하지 않는 결과 반환 | 계정 번호(@account)가 &#39;20&#39;으로 시작하지 않음 |
   | 다음 포함 | 입력한 값 이상이 포함된 결과를 반환합니다. | 이메일 도메인(@domain)에 &#39;mail&#39;이 포함됨</strong>은(는) &#39;mail&#39;을 포함하는 모든 도메인 이름을 반환합니다. 따라서 &#39;gmail.com&#39; 도메인도 반환됩니다. |
   | 포함하지 않음 | 입력한 값이 포함되지 않은 결과를 반환합니다. | 이메일 도메인(@domain)에 &quot;vo&quot;가 포함되지 않음</strong>. 이 경우 &#39;vo&#39;가 포함된 도메인 이름은 반환되지 않습니다. &#39;voila.fr&#39; 도메인 이름은 결과에 표시되지 않습니다. |
   | 좋아요 | 비슷함 은 포함 연산자와 매우 유사합니다. 값에 % 와일드카드 문자를 삽입할 수 있습니다. | &#39;Jon%s&#39;과(와) 같은 성(@lastName) 여기서 운영자가 &#39;n&#39;과 &#39;s&#39; 사이의 누락된 문자를 잊었다면 와일드카드 문자는 &#39;Jones&#39;라는 이름을 찾기 위한 &#39;조커&#39;로 사용된다. |
   | 비슷하지 않음 | 비슷함 은 포함 연산자와 매우 유사합니다. 값에 % 와일드카드 문자를 삽입할 수 있습니다. | 성(@lastName)은 &#39;Smi%h&#39;와 다릅니다. 여기에서 성이 &#39;Smi%h&#39;인 수신자는 반환되지 않습니다. |

+++

1. 다음에서 **값** 필드에서 예상 값을 정의합니다. 표현식 편집기를 사용하여 데이터베이스 및 도우미 함수의 필드를 사용하여 표현식을 수동으로 정의할 수도 있습니다. 이렇게 하려면 **표현식 편집** 단추를 클릭합니다. [표현식 편집 방법 알아보기](expression-editor.md)

   *쿼리 예제가 21세 이상의 모든 프로필을 반환합니다.*

   ![](assets/query-custom-condition.png){zoomable="yes"}

#### 연결된 테이블에 대한 사용자 지정 조건(1-1 및 1-N 링크){#links}

사용자 지정 조건을 사용하면 현재 규칙에서 사용하는 테이블에 연결된 테이블을 쿼리할 수 있습니다. 여기에는 1-1 카디널리티 링크가 있는 테이블 또는 컬렉션 테이블(1-N 링크)이 포함됩니다.

의 경우 **1-1 링크**&#x200B;로 이동하여 연결된 테이블로 이동하고 원하는 속성을 선택한 다음 예상 값을 정의합니다.

에서 표 링크를 직접 선택할 수도 있습니다. **값** 선택 및 확인. 이 경우 아래 예와 같이 전용 선택기를 사용하여 선택한 테이블에 사용할 수 있는 값을 선택해야 합니다.

+++쿼리 예

여기에서 쿼리는 레이블이 &quot;실행 중&quot;인 브랜드를 타겟팅합니다.

1. 내부 탐색 **브랜드** 표 및 선택 **레이블** 특성.

   ![](assets/1-1-attribute.png){zoomable="yes"}{width="85%" align="center"}

1. 속성에 대한 예상 값을 정의합니다.

   ![](assets/1-1-table.png){zoomable="yes"}{width="85%" align="center"}

다음은 테이블 링크가 직접 선택된 쿼리 샘플입니다. 이 테이블에 사용할 수 있는 값은 전용 선택기에서 선택해야 합니다.

![](assets/1-1-table-direct.png){zoomable="yes"}{width="85%" align="center"}

+++

의 경우 **1-N 링크**&#x200B;을(를) 통해 아래 예와 같이 하위 조건을 정의하여 쿼리를 세분화할 수 있습니다.

+++쿼리 예

여기서 쿼리는 BrewMaster 제품과 관련된 구매를 한 수신자를 대상으로 하며, 총 금액 100$ 이상입니다.

1. 다음 항목 선택 **구매** 테이블 및 확인합니다.

   ![](assets/1-N-collection.png){zoomable="yes"}{width="50%" align="center"}

1. 아웃바운드 전환이 추가되어 하위 조건을 만들 수 있습니다.

   ![](assets/1-n-subcondition.png){zoomable="yes"}{width="85%" align="center"}

1. 다음 항목 선택 **가격** 1000$ 이상의 특성 및 대상 구매

   ![](assets/1-n-price.png){zoomable="yes"}{width="85%" align="center"}

1. 필요에 따라 하위 조건을 추가합니다. 여기에서는 BrewMaster 제품을 구매한 대상 프로필에 조건을 추가했습니다.

   ![](assets/custom-condition-1-N.png){zoomable="yes"}{width="85%" align="center"}

+++

#### 집계 데이터를 사용한 작업 {#aggregate}

사용자 지정 조건을 사용하면 집계 작업을 수행할 수 있습니다. 이렇게 하려면 컬렉션 테이블에서 속성을 직접 선택해야 합니다.

1. 원하는 수집 테이블 내부로 이동하여 합계 작업을 수행할 속성을 선택합니다.

   ![](assets/aggregate-attribute.png){zoomable="yes"}{width="85%" align="center"}

1. 속성 창에서 **집계 데이터** 옵션을 선택하고 원하는 집계 함수를 선택합니다.

   ![](assets/aggregate.png){zoomable="yes"}{width="85%" align="center"}

### 대상자 선택 {#audiences}

>[!CONTEXTUALHELP]
>id="dc_orchestration_querymodeler_selectaudience"
>title="대상자 선택"
>abstract="**대상자 선택** 옵션을 사용하여 쿼리 필터링에 사용할 대상자를 선택할 수 있습니다."

기존 대상자를 사용하여 쿼리를 필터링하려면 다음 단계를 따르십시오.

1. 다음을 클릭합니다. **+** 원하는 노드의 버튼을 클릭하고 **[!UICONTROL 대상자 선택]**.

1. 다음 **대상자 선택** 속성 창이 오른쪽에 열립니다. 쿼리를 필터링하는 데 사용할 대상을 선택합니다.

   *쿼리 예제가 &quot;축제 방문자&quot; 대상에 속하는 모든 프로필을 반환합니다.*

   ![](assets/query-audience.png){zoomable="yes"}

### 미리 정의된 필터 사용 {#predefined-filters}

>[!CONTEXTUALHELP]
>id="dc_orchestration_querymodeler_predefinedfilter"
>title="미리 정의된 필터"
>abstract="**미리 정의된 필터** 옵션을 사용하여 사용자 정의 필터 목록이나 즐겨찾기에서 미리 정의된 필터를 선택할 수 있습니다."

사전 정의된 필터를 사용하여 쿼리를 필터링하려면 다음 단계를 수행합니다.

1. 다음을 클릭합니다. **+** 원하는 노드의 버튼을 클릭하고 **[!UICONTROL 미리 정의된 필터]**.

1. 다음 **미리 정의된 필터** 속성 창이 오른쪽에 열립니다. 사용자 지정 필터 목록 또는 즐겨찾기에서 사전 정의된 필터를 선택합니다.

   *쿼리 예제가 &quot;비활성 고객&quot; 사전 정의된 필터에 해당하는 모든 프로필을 반환합니다.*

   ![](assets/query-predefined-filter.png){zoomable="yes"}

### 구성 요소 복사-붙여넣기 {#copy}

쿼리 모델러를 사용하면 하나 이상의 필터링 구성 요소를 복사하여 전환 끝에 붙여넣을 수 있습니다. 이 작업은 현재 쿼리 캔버스 내에서 또는 인스턴스 내의 캔버스에서 실행할 수 있습니다.

>[!NOTE]
>
>복사된 선택 사항은 인스턴스에서 작업하는 동안 유지됩니다. 로그오프했다가 다시 로그인하면 더 이상 선택 항목을 붙여넣을 수 없습니다.

필터링 구성 요소를 복사하여 붙여넣으려면 다음 단계를 수행합니다.

1. 쿼리 캔버스에서 복사할 필터링 구성 요소를 클릭하여 선택합니다. 여러 구성 요소를 선택하려면 캔버스의 오른쪽 위 모서리에 있는 도구 모음에서 사용할 수 있는 다중 선택 도구를 사용합니다.

1. 다음을 클릭합니다. **[!UICONTROL 복사]** 구성 요소의 속성 창 또는 여러 구성 요소를 선택한 경우 화면 맨 아래에 있는 파란색 리본에 있는 단추입니다.

   | 단일 구성 요소 복사 | 여러 구성 요소 복사 |
   |  ---  |  ---  |
   | ![](assets/copy-single-component.png){zoomable="yes"}{width="200" align="center" zoomable="yes"} | ![](assets/copy-multiple-components.png){zoomable="yes"}{width="200" align="center" zoomable="yes"} |

1. 구성 요소를 붙여넣으려면 원하는 전환 끝에 있는 + 단추를 클릭하고 다음을 선택합니다 **n개 항목 붙여넣기**.

   ![](assets/copy-paste.png){zoomable="yes"}

## 필터링 구성 요소를 연산자와 결합 {#operators}

>[!CONTEXTUALHELP]
>id="dc_orchestration_querymodeler_group"
>title="그룹"
>abstract="이 창에서 필터링 조건을 함께 연결하는 데 사용되는 연산자를 변경할 수 있습니다."

쿼리에 새 필터링 구성 요소를 추가할 때마다 는 다음을 통해 다른 구성 요소에 자동으로 연결됩니다. **및** 연산자. 즉, 두 필터링 구성 요소의 결과가 결합됩니다.

이 예제에서는 두 번째 전환에 새로운 대상자 유형 필터링 구성 요소를 추가했습니다. 구성 요소는 을 사용하여 사전 정의된 필터 조건에 연결됩니다. **및** 연산자 - 쿼리 결과에 &quot;Madridians&quot; 사전 정의된 필터 AND가 타겟팅한 수신자가 포함됨을 의미합니다. &quot;Discount hunters&quot; 대상에 속합니다.

![](assets/query-operator.png){zoomable="yes"}

필터링 조건을 함께 연결하는 데 사용되는 연산자를 변경하려면 해당 연산자를 클릭하고 **그룹** 오른쪽에 열리는 창입니다.

사용 가능한 연산자는 다음과 같습니다.

* **AND(교차)**: 아웃바운드 전환의 모든 필터링 구성 요소와 일치하는 결과를 결합합니다.
* **OR(결합)**: 아웃바운드 전환의 필터링 구성 요소 중 하나 이상과 일치하는 결과를 포함합니다.
* **제외(제외)**: 아웃바운드 전환의 모든 필터링 구성 요소와 일치하는 결과를 제외합니다.

![](assets/query-operator-change.png){zoomable="yes"}

또한 **+** 전환 단추 이렇게 하면 이 특정 위치에 연산자를 추가하여 여러 구성 요소를 함께 그룹화하고 쿼리를 구체화할 수 있습니다.

아래 예에서는 &quot;VIP to reward&quot; 또는 &quot;Super VIP&quot; 대상의 결과를 포함하는 중간 그룹을 만들었습니다.

![](assets/query-intermediate-group.png){zoomable="yes"}

## 쿼리 확인 및 검증

>[!CONTEXTUALHELP]
>id="dc_orchestration_querymodeler_ruleproperties"
>title="규칙 속성"
>abstract="캔버스에 쿼리를 작성한 후에는 오른쪽에 있는 **규칙 속성** 창을 사용하여 확인할 수 있습니다.<br/>이 창에서는 결과 데이터를 표시하고, 쿼리의 SQL 코드 버전을 검색하고, 타겟팅된 레코드 수를 확인할 수 있습니다.<br/> **필터 선택 또는 저장** 버튼을 사용하여 쿼리를 미리 정의된 필터로 저장하거나 캔버스 콘텐츠를 기존 필터로 바꿀 수 있습니다."

캔버스에 쿼리를 빌드한 후에는 **규칙 속성** 오른편에 있는 창입니다. 이 창은 대상자를 만들기 위한 쿼리를 작성할 때 표시됩니다. 사용 가능한 작업은 다음과 같습니다.

* **결과 보기:** 쿼리의 결과 데이터를 표시합니다.
* **코드 보기**: SQL에서 쿼리의 코드 기반 버전을 표시합니다.
* **계산**: 쿼리가 타겟팅한 레코드 수를 업데이트하고 표시합니다.
* **필터 선택 또는 저장**: 캔버스에서 사용할 기존의 사전 정의된 필터를 선택하거나 나중에 다시 사용할 수 있도록 쿼리를 사전 정의된 필터로 저장합니다.

  >[!IMPORTANT]
  >
  >규칙 속성 창에서 사전 정의된 필터를 선택하면 캔버스에 내장된 쿼리가 선택한 필터로 바뀝니다.

쿼리가 준비되면 **[!UICONTROL 확인]** 오른쪽 상단의 단추를 클릭하여 저장합니다.

쿼리를 열면 언제든지 수정할 수 있습니다. 기존 쿼리를 열면 의 가시성 없이 간소화된 보기로 표시됩니다.  **+** 단추. 쿼리에 새 요소를 추가하려면 캔버스에서 구성 요소 또는 연산자를 선택하여 **+** 단추.

![](assets/edit-audience.png){zoomable="yes"}
